# Define one or more tests for each translator
TitleTranslator:
  - kwargs:
      fields:
      - title
      - name
      schema:
        type: string
        minLength: 5
        maxLength: 256
      dict_key_priority:
      - title
      - en
      type_keys:
      - type
      type_priority:
      - primary
      - alternative
    translate_function_tests:
    # Test basic translation
    - _structured:
        title: "This is the title of the entry"
      _translated:
        title: "This is the title of the entry"
    # Test field priority
    - _structured:
        name: "This is the name of the entry"
        title: "This is the title of the entry"
      _translated:
        title: "This is the title of the entry"
    # If the highest priority field is there, but has no value, move to next
    - _structured:
        name: "This is the name of the entry"
        title: null
      _translated:
        title: "This is the name of the entry"
    # Test minimum length rejection
    - _structured:
        title: "N/A"
      _translated: {}
    # Test maximum length abbreviation
    - _structured:
        title: "This is a very long string that easy surpasses the maximum length that was set for a title. This should be shorted not to break the whole thing. That is because the length of this title is simply rediculous. Who makes titles this long? I don't think a sane person would make such a title"
      _translated:
        title: "This is a very long string that easy surpasses the maximum length that was set for a title. This should be shorted not to break the whole thing. That is because the length of this title is simply rediculous. Who makes titles this long? I don't think a sanâ€¦"
    # Test dict key and type priority
    - _structured:
        title:
          - nonsensekey: nonsensevalue
          - en: "First good entry"
            title: "Not the preferred title"
            type: "alternative"
          - title: "The preferred title"
            type: "primary"
      _translated:
        title: "The preferred title"

DescriptionTranslator:
  - kwargs:
      fields:
      - description
      - abstract
      - summary
      schema:
        type: string
        minLength: 5
        maxLength: 2048
      dict_key_priority:
      - _content
      - data
      type_keys:
      - type
      type_priority:
      - full
      - brief
    translate_function_tests:
      # Basic test
      - _structured:
          description: "This is a default description"
        _translated:
          description: "This is a default description"
      # Test HTML
      - _structured:
          description: "<p>This is a default description</p>"
        _translated:
          description: "This is a default description"
      # Test dictionary
      - _structured:
          description:
            data: "This is the second in the chain"
            _content: "This should be the main description"
        _translated:
          description: "This should be the main description"
      # Test list with types
      - _structured:
          abstract:
            - data: "This is the second in the chain"
              type: "brief"
            - data: "This should be the main description"
              type: "full"
        _translated:
          description: "This should be the main description"
